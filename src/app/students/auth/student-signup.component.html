<div class="accountContainer">
  <div class="login-card">
    <h2>Student Sign Up</h2>
    <form #signupForm="ngForm" (ngSubmit)="onSubmit(signupForm)" class="form">
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          id="firstName"
          name="firstName"
          [(ngModel)]="studentData.firstName"
          required
          minlength="3"
          #firstNameInput="ngModel"
          placeholder="Enter your first name"
          [class.error]="firstNameInput.invalid && firstNameInput.touched">
        <div *ngIf="fieldErrors['first_name'] || (firstNameInput.invalid && firstNameInput.touched)" class="error-message">
          {{ fieldErrors['first_name'] || 'Please enter your first name (minimum 3 characters)' }}
        </div>
      </div>

      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          id="lastName"
          name="lastName"
          [(ngModel)]="studentData.lastName"
          required
          minlength="3"
          #lastNameInput="ngModel"
          placeholder="Enter your last name"
          [class.error]="lastNameInput.invalid && lastNameInput.touched">
        <div *ngIf="fieldErrors['last_name'] || (lastNameInput.invalid && lastNameInput.touched)" class="error-message">
          {{ fieldErrors['last_name'] || 'Please enter your last name (minimum 3 characters)' }}
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="studentData.email"
          required
          email
          #emailInput="ngModel"
          placeholder="Enter your email"
          [class.error]="emailInput.invalid && emailInput.touched">
        <div *ngIf="fieldErrors['email'] || (emailInput.invalid && emailInput.touched)" class="error-message">
          {{ fieldErrors['email'] || 'Please enter a valid email address' }}
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input
          type="text"
          id="phone"
          name="phone"
          [(ngModel)]="studentData.phone"
          required
          pattern="[0-9]{10}"
          #phoneInput="ngModel"
          placeholder="Enter your phone number"
          (input)="onPhoneInput($event)"
          [class.error]="phoneInput.invalid && phoneInput.touched">
        <div *ngIf="fieldErrors['contact'] || (phoneInput.invalid && phoneInput.touched)" class="error-message">
          {{ fieldErrors['contact'] || 'Please enter a valid 10-digit phone number' }}
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          name="password"
          [(ngModel)]="studentData.password"
          required
          minlength="8"
          #passwordInput="ngModel"
          placeholder="Enter your password"
          [class.error]="passwordInput.invalid && passwordInput.touched">
        <div *ngIf="fieldErrors['password'] || (passwordInput.invalid && passwordInput.touched)" class="error-message">
          {{ fieldErrors['password'] || 'Password must be at least 8 characters long' }}
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input
          type="password"
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          required
          placeholder="Confirm your password"
          #confirmPasswordInput="ngModel"
          [class.error]="confirmPasswordInput.touched && studentData.password !== confirmPassword">
        <div *ngIf="confirmPasswordInput.touched && studentData.password !== confirmPassword" class="error-message">
          Passwords do not match
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-banner">
        {{ errorMessage }}
      </div>

      <button type="submit" class="login_btn" [disabled]="!signupForm.valid || studentData.password !== confirmPassword || isLoading">
        <span *ngIf="!isLoading">Sign Up</span>
        <span *ngIf="isLoading">Signing up...</span>
      </button>

      <div class="form-footer">
        <p>Already have an account? <a [routerLink]="['/account']" class="signup-link">Login</a></p>
      </div>
    </form>
  </div>
</div>
